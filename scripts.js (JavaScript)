// V√§xla bakgrund fr√•n ljus till m√∂rk
function toggleBackground() {
    if (document.body.classList.contains('light-mode')) {
        document.body.classList.remove('light-mode');
        document.body.classList.add('dark-mode');
    } else {
        document.body.classList.remove('dark-mode');
        document.body.classList.add('light-mode');
    }
}

// Uppdatera volymprocenten och ikoner vid sliderf√∂r√§ndring
function updateVolumePercentage(type) {
    const volumeSlider = document.getElementById(`${type}-volume`);
    const volume = volumeSlider.value;
    const volumePercentage = document.getElementById(`${type}-volume-percent`);
    const volumeIcon = document.getElementById(`${type}-volume-icon`);
    
    volumePercentage.textContent = `${volume}%`;

    // Uppdatera ikon baserat p√• volym
    if (volume == 0) {
        volumeIcon.textContent = 'üîá';
    } else if (volume <= 30) {
        volumeIcon.textContent = 'üîà';
    } else if (volume <= 70) {
        volumeIcon.textContent = 'üîâ';
    } else {
        volumeIcon.textContent = 'üîä';
    }
}

// Funktion f√∂r att spara volyminst√§llningar till en fil
document.getElementById("save-btn").addEventListener("click", function() {
    const settings = {
        originalVolume: document.getElementById("original-volume").value,
        corruptedVolume: document.getElementById("corrupted-volume").value,
        musicVolume: document.getElementById("music-volume").value,
        finalVolume: document.getElementById("final-volume").value
    };

    const fileContent = JSON.stringify(settings, null, 2);
    const blob = new Blob([fileContent], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "audio_settings.json";
    a.click();
});

// Funktion f√∂r att hantera filval
function handleFileSelect(event) {
    const file = event.target.files[0];
    const fileInfo = document.getElementById('file-info');
    const videoPlayer = document.getElementById('video-player');
    const videoSource = document.getElementById('video-source');

    if (file) {
        // Kontrollera om filen √§r en kompatibel videotyp
        if (file.type === 'video/mp4' || file.type === 'video/webm') {
            const fileURL = URL.createObjectURL(file);
            videoSource.src = fileURL;
            videoPlayer.load();

            // Uppdatera filnamnet
            fileInfo.textContent = `Selected file: ${file.name}`;
            fileInfo.style.visibility = 'visible';
        } else {
            // Om filen inte √§r kompatibel
            fileInfo.textContent = 'Please select a valid video file (MP4 or WebM).';
        }
    }
}

// Trigger f√∂r att √∂ppna filv√§ljaren
document.getElementById('browse-btn').addEventListener('click', function() {
    document.getElementById('file-input').click();
});
